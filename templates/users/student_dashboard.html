{% extends "base.html" %}

{% block content %}

<div class="dashboard">

  <!-- Header -->
  <header class="dashboard-header">
    <h2>Student Dashboard</h2>
    <p class="muted">
      Welcome back, <strong>{{ user.username }}</strong>
    </p>
  </header>

  <!-- Main Grid -->
  <section class="dashboard-grid">

    <!-- Courses -->
    <div class="card">
      <h2>My Courses</h2>

      {% if courses %}
      <ul class="list">
        {% for course in courses %}
        <li class="course-item">
          <a href="{% url 'course_detail' course.id %}" class="clickable-row">
            <div class="course-title">{{ course.title }}</div>
            <div class="course-desc">{{ course.description }}</div>
          </a>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="muted">You are not enrolled in any courses yet.</p>
      {% endif %}

      <!-- Enroll CTA -->
      <a href="{% url 'available_courses' %}" class="clickable-row">
        <div class="course-title">+ Enroll in a course</div>
        <div class="course-desc">Browse available courses</div>
      </a>
    </div>

    <!-- Assignments -->
    <div class="card">
      <h2>Upcoming Assignments</h2>

      {% if assignments %}
      <ul class="list">
        {% for assignment in assignments %}
        <li>
          <a href="{% url 'assignment_detail' assignment.id %}" class="clickable-row assignment-row">

            <div class="assignment-title">
              {{ assignment.title }}

              {% if assignment.is_overdue %}
              <span class="badge badge-red">Overdue</span>
              {% elif assignment.is_due_soon %}
              <span class="badge badge-orange">Due soon</span>
              {% else %}
              <span class="badge badge-green">Upcoming</span>
              {% endif %}
            </div>

            <div class="assignment-meta">
              {{ assignment.course.title }} â€”
              due {{ assignment.due_date|date:"M d, Y" }}
            </div>

          </a>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="muted">No assignments right now</p>
      {% endif %}
    </div>

  </section>
</div>

{% endblock %}